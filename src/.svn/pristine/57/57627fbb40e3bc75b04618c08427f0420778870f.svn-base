package stats.utilities;

import java.util.Collection;
import stats.Values;
import stats.Statistics;
import util.Couple;

/**
 *
 * @author xvas
 */
public class CommonFunctions {

   public static String toStatValues_csvLine(Couple<String, Values>[] aggrs, boolean mean, boolean stddev,
         Statistics.ConfidenceInterval confInterv) {
      if (aggrs.length == 0) {
         return "";
      }
      StringBuilder _toString = new StringBuilder();
      for (Couple<String, Values> nxt_title_aggr : aggrs) {
         Values aggr = nxt_title_aggr.getSecond();
         if (aggr == null) {
            continue;
         }

         if (mean) {
            _toString.append(aggr.mean()).append(",");
         }
         if (stddev) {
            _toString.append(aggr.stddev()).append(",");
         }
         if (confInterv !=  Statistics.ConfidenceInterval.NONE && confInterv!=null) {
            _toString.append('-').append(aggr.absConfInterval(confInterv.z())).append(",");
            _toString.append(aggr.absConfInterval(confInterv.z())).append(",");
         }
      }
      return _toString.toString();
   }

   public static String toTitles_csvLine(String[] statTitles, boolean mean, boolean stddev, Statistics.ConfidenceInterval confInterval) {
      if (statTitles.length == 0) {
         return "";
      }
      StringBuilder _toString = new StringBuilder();
      for (String nxt_title : statTitles) {
         if (mean) {
            _toString.append(nxt_title);
            _toString.append("").append(',');
         }
         if (stddev) {
            _toString.append(nxt_title);
            _toString.append("(stddev)").append(',');
         }
         if (confInterval != Statistics.ConfidenceInterval.NONE) {
            _toString.append(nxt_title);
            _toString.append('(').append(confInterval.getConfidencePercentile()).append("conf.)").append(',');
         }

      }
      return _toString.toString();
   }

   public static String toTitles_csvLine(Collection<String> titles, boolean mean, boolean stddev,  Statistics.ConfidenceInterval confInterval) {
      return toTitles_csvLine(titles.toArray(new String[titles.size()]), mean, stddev, confInterval);
   }

   public static String toTitles_csvLine(Collection<String> titles) {
      return toTitles_csvLine(
            titles.toArray(new String[titles.size()]), false, false, Statistics.ConfidenceInterval.NONE
      );
   }

}
